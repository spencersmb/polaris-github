!function(n,i){"use strict";var t=i.Modernizr,e=n("body");n.DLMenu=function(i,t){this.$el=n(t),this._init(i)},n.DLMenu.defaults={animationClasses:{"in":"dl-animate-in-1",out:"dl-animate-out-1"}},n.DLMenu.prototype={_init:function(i){this.options=n.extend(!0,{},n.DLMenu.defaults,i),this._config();var e={WebkitAnimation:"webkitAnimationEnd",OAnimation:"oAnimationEnd",msAnimation:"MSAnimationEnd",animation:"animationend"},s={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",msTransition:"MSTransitionEnd",transition:"transitionend"};this.animEndEventName=e[t.prefixed("animation")]+".dlmenu",this.transEndEventName=s[t.prefixed("transition")]+".dlmenu",this.supportAnimations=t.cssanimations,this.supportTransitions=t.csstransitions,this._initEvents()},_config:function(){this.open=!1,this.$trigger=this.$el.children("button"),this.$menu=this.$el.children("ul.dl-menu"),this.$menuitems=this.$menu.find("li:not(.dl-back)"),this.$back=this.$menu.find("li.dl-back")},_initEvents:function(){var i=this;this.$trigger.on("click.dlmenu",function(){return i.open?i._closeMenu():(i._openMenu(),e.off("click").on("click.dlmenu",function(){i._closeMenu()})),!1}),this.$menuitems.on("click.dlmenu",function(t){t.stopPropagation();var e=n(this),s=e.children("ul.dl-submenu");if(s.length>0){var o=s.clone().insertAfter(i.$menu).addClass(i.options.animationClasses.in),a=function(){i.$menu.off(i.animEndEventName).removeClass(i.options.animationClasses.out).addClass("dl-subview"),e.addClass("dl-subviewopen").parents(".dl-subviewopen:first").removeClass("dl-subviewopen").addClass("dl-subview"),o.remove()};return i.$menu.addClass(i.options.animationClasses.out),i.supportAnimations?i.$menu.on(i.animEndEventName,a):a.call(),!1}}),this.$back.on("click.dlmenu",function(){var t=n(this),e=t.parents("ul.dl-submenu:first"),s=e.parent(),o=e.clone().insertAfter(i.$menu).addClass(i.options.animationClasses.out),a=function(){i.$menu.off(i.animEndEventName).removeClass(i.options.animationClasses.in),o.remove()};i.$menu.addClass(i.options.animationClasses.in),i.supportAnimations?i.$menu.on(i.animEndEventName,a):a.call(),s.removeClass("dl-subviewopen");var l=t.parents(".dl-subview:first");return l.is("li")&&l.addClass("dl-subviewopen"),l.removeClass("dl-subview"),!1})},_closeMenu:function(){var n=this,i=function(){n.$menu.off(n.transEndEventName),n._resetMenu()};this.$menu.removeClass("dl-menuopen"),this.$menu.addClass("dl-menu-toggle"),this.$trigger.removeClass("dl-active"),this.supportTransitions?this.$menu.on(this.transEndEventName,i):i.call(),this.open=!1},_openMenu:function(){this.$menu.addClass("dl-menuopen dl-menu-toggle").on(this.transEndEventName,function(){n(this).removeClass("dl-menu-toggle")}),this.$trigger.addClass("dl-active"),this.open=!0},_resetMenu:function(){this.$menu.removeClass("dl-subview"),this.$menuitems.removeClass("dl-subview dl-subviewopen")}};var s=function(n){i.console&&i.console.error(n)};n.fn.dlmenu=function(i){if("string"==typeof i){var t=Array.prototype.slice.call(arguments,1);this.each(function(){var e=n.data(this,"dlmenu");return e?n.isFunction(e[i])&&"_"!==i.charAt(0)?(e[i].apply(e,t),void 0):(s("no such method '"+i+"' for dlmenu instance"),void 0):(s("cannot call methods on dlmenu prior to initialization; attempted to call method '"+i+"'"),void 0)})}else this.each(function(){var t=n.data(this,"dlmenu");t?t._init():t=n.data(this,"dlmenu",new n.DLMenu(i,this))});return this}}(jQuery,window);